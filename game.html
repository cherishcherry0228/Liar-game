<!DOCTYPE html>
<html><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>"라이어 게임 - 주제"</title>
</head>

<style>

  .card {
    width: 200px;           /* 카드의 가로 크기 */
    height: 300px;          /* 카드의 세로 크기 */
    margin: 20px;           /* 카드 주변 여백 */
    background-color: #ccc; /* 카드 배경 색상 */
    text-align: center;     /* 카드 안의 내용을 가운데 정렬 */
    line-height: 300px;     /* 카드 안의 내용을 세로 중앙 정렬 */
    cursor: url('/zoom-in-cursor'), default;     /*마우스를 가져다 대면 손가락 모양으로 변함 */
    font-size: 24px;        /* 카드 안의 내용의 폰트 크기 */
    color: #7279e1;       /* 카드 안의 내용의 글자 색상 */
    position: relative;     /* 카드를 상대적인 위치로 배치 */
    display: inline-block;  /* 카드를 인라인 블록으로 표시 */
  }

  .card .back {
    background-color: rgb(238, 236, 152);
  }

  .card .front {
    background-color: #ccc;
    display: none;
  }

  .card .back p {
    margin: 0;
    font-size: 18px;
  }
</style>

<body>
  <h1 id="title"></h1>
  <div id="cards"></div>
  <script>

  const title = '주제: ${topic}';
  document.title = `라이어 게임`;

    // 참가 인원 수와 주제를 가져오기
    const playerNum = Number(new URLSearchParams(window.location.search).get('player_num'));
    const topic = new URLSearchParams(window.location.search).get('topic');

    // 랜덤으로 라이어 선택
    const liarIndex = Math.floor(Math.random() * playerNum);

    // 랜덤 음식, 장소, 직업 선택
    const foods = ['사과', '떡볶이', '츄러스'];
    const places = ['학교', '집', '놀이공원', '바다'];
    const jobs = ['연예인', '선생님', '운전기사'];

    const randomFood = foods[Math.floor(Math.random() * foods.length)];
    const randomPlace = places[Math.floor(Math.random() * places.length)];
    const randomJob = jobs[Math.floor(Math.random() * jobs.length)];

    // 카드 생성
    const cards = [];
    for (let i = 0; i < playerNum; i++) {
      const isLiar = i === liarIndex;
      const card = {
        front: {
          message: isLiar ? '라이어' : topic === '음식' ? randomFood : topic === '장소' ? randomPlace : randomJob
        },
        back: {
          message: '카드 뒷면(이미지)'
        },
        flipped: false
      };
      cards.push(card);
    }


    // 카드 렌더링
    const cardContainer = document.getElementById('cards');
    cards.forEach(card => {
      const div = document.createElement('div');
      div.className = 'card';
      div.innerHTML = `
                <div class="front">
                    <p>${card.front.message}</p>
                </div>
                <div class="back">
                    <p>${card.back.message}</p>
                </div>
            `;
      div.addEventListener('click', () => {
        card.flipped = !card.flipped;
        if (card.flipped) {
          div.querySelector('.front').style.display = 'none';
          div.querySelector('.back').style.display = 'block';
        } else {
          div.querySelector('.front').style.display = 'block';
          div.querySelector('.back').style.display = 'none';
        }
      });
      cardContainer.appendChild(div);
    });
  </script>
</body>

</html>